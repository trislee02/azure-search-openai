class ChatRAGPrompt:
    # Chat roles
    SYSTEM = "system"
    USER = "user"
    ASSISTANT = "assistant"
    
    ## Generation prompt
    system_message_chat_conversation = """Given many sources as reference, answer the customer question as if you are a member of LuxAI Support team.
ONLY use the provided source to answer. If there isn't enough information from provided source, say "I don't know" and do not answer any further.
Each of your sentence must be cited from at least one source you use information from. The citation is the exact source name wrapped in square brackets.
Answer covers the maximal number of sentences that are relevant to the question.

Follow this example to cite used sources:
<example>
Source:

[doc1.txt]:
To make a QTrobot speak, we need to prepare these things. After that, follow these steps

[doc2.txt]:
Following is the example code:
def foo(a, b):
print(a + b)

Question: I want make my robot speak

Answer:
Before started to program your robot, we need to prepare a few things [doc1.txt]. Then, you should follow these steps [doc1.txt]: A [doc1.txt] B [doc1.txt] C [doc1.txt].
The example code is as followed [doc2.txt]:
```
def foo(a, b):
    print(a + b)
``` [doc2.txt]
</example>
"""

    user_chat_template = """Source: 
<source>
    {content}
</source>

Question: {question}

Answer:"""

class ChatRAGCodePrompt:
    system_message = """
You are a proficient developer. Respond with a detailed answer and the syntactically correct code (if needed) to the question below.
Only use provided source to answer the question.
Use snippet code in the provided source to write code if needed.
Do not add license information to the output code.
Cite the source used in the answer and output code. Each sentence of your answer must be cited from at least one source.

Follow this example to cite used sources:
### EXAMPLE ###
Source:
[doc1.txt]:
To make a QTrobot speak, we need to prepare these things. After that, follow these steps
-------
[doc2.txt]:
Following is the example code:
def foo(a, b):
    print(a + b)

Question: I want make my robot speak

Answer:
Before started to program your robot, we need to prepare a few things [doc1.txt]. Then, you should follow these steps [doc1.txt]: A [doc1.txt] B [doc1.txt] C [doc1.txt].
The example code is as followed [doc2.txt]:
```
def foo(a, b):
    print(a + b)
``` [doc2.txt]
"""

    user_content_template = """
Source:
{context}

Question: {question}

Answer:
"""

class ChatTeacherStudentPrompt:
    ## Post-checking prompt
    ### Feedback prompt
    system_message_check_response = """You are an expert in reviewing student answers.
Given text sources, a question, and a student answer, you must step by step evaluate the student answer correction based on text sources.
If the answer contains knowledge not mentioned in source, it is wrong.
If the student partially suggests contacting LuxAI S.A. customer support, skip this suggestion and evaluate the rest.
If the student doesn't know the answer and doesn't use any knowledge beyond given sources, only respond `0` without any further explanation.

Examples:
Source:
The following source code will output a standard message along with 'Hello World':
```python
from msg.srv import msg_std
print(msg_std, 'Hello World')
```

Question: 
Write a python code to print out a long message along with 'Hi'.

Student answer:
```python
from msg.srv import msg_long
print(msg_long, 'Hi')
```

Evaluation: The student uses a strange package named `msg_long` which is not included in the source. So the answer is wrong.

"""

    response_check_template = """Source:
{source}

Question:
{question}

Student answer:
{answer}

Evaluation:
"""

    ### Revise answer prompt
    system_message_revise_prompt = """You received a feedback on your previous answer.
Based on the provided sources, question, previous answer and feedback, you must revise your answer wisely.
If the provided sources do not contain enough facts you need, respond "I don't know".

Example:
Source:
The following source code will output a standard message along with 'Hello World':
```python
from msg.srv import msg_std
print(msg_std, 'Hello World')
```

Question: 
Write a python code to print out a message using OpenCV library along with 'Hi'.

Previous answer:
```python
from msg.srv import msg_opencv
print(msg_opencv, 'Hi')
```

Feedback: 
The student uses a strange package named `msg_opencv` which is not included in the source. So the answer is wrong.

Thought: 
The feedback said my previous code containing a strange package named `msg_opencv` so I will remove it. On the other hand, based on the provided source, I cannot find any OpenCV library so I will respond "I don't know"

Revised answer:
I don't know.
"""

    response_revise_template = """Source:
{source}

Question:
{question}

Previous answer:
{previous_answer}

Feedback:
{feedback}

Thought:

Revised answer:
"""

class ChatGeneralPrompt:
    system_message = """You are an intelligent member of LuxAI Support team. Your role is to acquire customers concerns, problems.
Answer as a customer service staff, not an AI language model.
Direct the conversation towards company products and QTrobot API. If customer requests to do anything beyond your role, direct it back to your role."""

    user_message_template = """Here is the customer message: 
```
{message}
```"""


class ChatVectorComparePrompt:
    system_message_revise = """You are a student revising your answer. Your previous answer is incorrect because it contains content not existing in sources provided.
You are given the last chance to revise your answer. You must answer the question and cite the passage you use in your answer.
Do not apologize for the previous wrong answer.
{injected_prompt}
ONLY use the provided source to answer. If there isn't enough information from provided source, say "I don't know" and do not answer any further.
Cite at least one source in each of your answer sentence. The citation is the exact source name wrapped in square brackets.
Please provide a detailed and concise answer, do not direct the reader to read any further source.

Example:
<example>
Source:

[doc1.txt]:
To make a QTrobot speak, we need follow 4 steps: A B C D

[doc2.txt]:
Following is the example code:
def foo(a, b):
print(a + b)

Question: I want make my robot speak

Previous answer: 
We have complete 2 steps: C and D to make a QTrobot speak [doc1.txt]. Then add the following code:
```
def foo(a, b, c, d):
print(a + b + c + d)
```

Revised answer:
To make the robot speak you should follow these steps[doc1.txt]: A B C D.
The example code [doc2.txt] is as followed:

```
def foo(a, b):
    print(a + b)
```

</example>
"""

    user_message_revise_template = """Source:
{source}

Question:
{question}

Previous answer:
{previous_answer}

Revised answer:"""

    no_answer_message = "I apologize, but I'm not sure how to help you with that. You can reach out to our Support team at info@luxai.com for further assistance. Thank you for your understanding!"
    book_a_meeting_message = "About this issue, please book a meeting with this link so that we can check it together."
    # The text: "I am sorry I do not know the answer. The provided sources do not contain enough information."
    no_answer_embed = [0.019643718376755714, -0.005760960280895233, -0.014242016710340977, -0.03312872722744942, -0.028535356745123863, 0.026405468583106995, -0.0014546745223924518, -0.025892242789268494, -0.0036823954433202744, -0.008763330988585949, 0.036721307784318924, 0.02602054923772812, 0.010123379528522491, -0.009622984565794468, -0.010367161594331264, 0.003273418638855219, 0.02756022848188877, 0.005639068782329559, 0.0053118872456252575, -0.024339735507965088, 0.021645300090312958, 0.0038395707961171865, -0.014190694317221642, 0.00414429884403944, 0.003196434583514929, 0.010418484918773174, 0.024314073845744133, -0.018938032910227776, -0.007011948153376579, -0.022581936791539192, 0.012926875613629818, -0.0038812702987343073, -0.02699567936360836, -0.03192264586687088, -0.003926177509129047, -0.01479373499751091, 0.0010529148858040571, -0.0035797501914203167, 0.00884672999382019, -0.019695041701197624, 0.004230905324220657, 0.0027361351530998945, -0.0020128076430410147, -0.0157560333609581, -0.021016597747802734, 0.024339735507965088, 0.02459634840488434, -0.0010849914979189634, -0.006941379513591528, 0.039518389850854874, -0.004099391400814056, 0.004394496325403452, -0.009372786618769169, -0.015178654342889786, 0.010854726657271385, 0.0029366142116487026, -0.013715961016714573, 0.005623030476272106, -0.0018428015755489469, -0.007499512750655413, 0.01505034789443016, -0.012471388094127178, -0.006126633379608393, 0.0010104133980348706, -0.02210720255970955, -0.014845057390630245, -0.0048980992287397385, -0.009776952676475048, -0.0010898029431700706, 0.0034899357706308365, 0.015422436408698559, 0.0009310237364843488, -0.0002197248104494065, -0.016153782606124878, 0.01683380827307701, -0.006469853222370148, -0.014049557037651539, 0.025237880647182465, -0.02735493704676628, -0.01240081898868084, 0.01291404478251934, -0.0066719357855618, -0.018719913437962532, 0.002214890206232667, 0.017244387418031693, 0.0007975048501975834, 0.02282571978867054, -0.003499558661133051, -0.01115624699741602, 0.013279718346893787, 0.017680630087852478, 0.03258984163403511, 0.01824517920613289, 0.01133587583899498, -0.009109758771955967, 0.031332436949014664, 0.00166798394639045, 0.0355922132730484, -0.004327135160565376, -0.032461535185575485, -0.02552015520632267, -7.803639164194465e-05, -0.014575613662600517, -0.005953419953584671, -0.04711413383483887, 0.0037273026537150145, 0.008987867273390293, 0.013895589858293533, 0.012638186104595661, -0.03877421095967293, -0.012766492553055286, 0.012176282703876495, -0.0030857704114168882, -0.006460230331867933, -0.022735904902219772, -0.0021395101211965084, 0.06594952195882797, -0.02028525061905384, 0.0035733350086957216, -0.0210935827344656, -0.005100181791931391, -0.00040376439574174583, -0.0005813886527903378, -0.0037786252796649933, 
0.013959743082523346, 0.020323744043707848, -0.019900331273674965, -0.006248524412512779, -0.03651601821184158, 0.004015992395579815, 0.01245214231312275, 0.013549162074923515, 0.012695924378931522, 0.006665520370006561, -0.023403098806738853, 0.015448098070919514, -0.02206871099770069, 0.015922831371426582, 0.0059983269311487675, -0.004602994304150343, 0.015152992680668831, 0.028227420523762703, -0.01125889178365469, -0.020400727167725563, -0.023865001276135445, 0.016987774521112442, 0.01875840499997139, -0.0044201575219631195, 0.009520339779555798, 0.0008147460175678134, 0.02322346903383732, 0.00831425841897726, 0.008339920081198215, -0.0021330949384719133, 0.015140161849558353, 0.008910883218050003, -0.023505743592977524, 
0.009950165636837482, -0.004314304795116186, -0.021581146866083145, 0.00557812349870801, -0.014421646483242512, 0.020002977922558784, 0.0020416765473783016, 0.013292549178004265, 0.014177863486111164, 0.006319093052297831, -0.025661291554570198, -0.0061683328822255135, -0.021735114976763725, -0.0266877431422472, 0.035053323954343796, -0.019297292456030846, -0.0019967693369835615, -0.003161150496453047, 0.006986286956816912, 0.022197017446160316, 0.0021539446897804737, -0.029407840222120285, 0.011432105675339699, -0.002641509287059307, 0.007262145634740591, 0.004028822761029005, -0.005299056880176067, -0.0124585572630167, -0.011348706670105457, 0.016076799482107162, -0.013715961016714573, 0.01875840499997139, -0.021491331979632378, 0.013003859668970108, -2.484684591763653e-05, 0.008782576769590378, -0.022800058126449585, -0.6614454388618469, -0.05247734114527702, -0.012157036922872066, -0.021337363868951797, 0.01471675094217062, 0.027021341025829315, 0.00805764552205801, 0.008962206542491913, -0.02313365414738655, 
0.022504953667521477, -0.008692762814462185, 0.020156944170594215, -0.010213194414973259, -0.01829650066792965, -0.002697643358260393, -0.026200179010629654, -0.003922970034182072, -0.01174645684659481, -0.0017866675043478608, -0.0009614965529181063, -0.007486681919544935, 0.009058436378836632, 0.02232532389461994, -0.010758496820926666, -0.005019990261644125, -0.010655851103365421, 0.014665428549051285, -0.003448236035183072, -0.024493703618645668, 0.04010859876871109, -0.0025789598003029823, 0.02709832414984703, 0.012003069743514061, -0.0018620474729686975, 0.03831230849027634, -0.014549952931702137, -0.0005192402168177068, 0.035207293927669525, -0.0012750454479828477, 0.03700358420610428, -0.03741416335105896, -0.0041731675155460835, 0.009359956718981266, -0.01824517920613289, -0.03600279241800308, 0.015088839456439018, 0.015999816358089447, 0.01824517920613289, -0.0008484264835715294, -0.0033808753360062838, 0.0020929991733282804, -0.012798569165170193, -0.0033937059342861176, -0.0031034124549478292, 0.011496258899569511, -0.0011130585335195065, 0.024686163291335106, -0.023775186389684677, -0.014742412604391575, 0.005594161804765463, -0.007544419728219509, 0.00665910542011261, -0.050655391067266464, -0.011752871796488762, -0.02104225941002369, 0.0011226815404370427, -0.0032702109310775995, 0.014049557037651539, 0.019079171121120453, -0.010456976480782032, 0.012311005033552647, 0.008205197751522064, -0.011682303622364998, 0.012035146355628967, -0.014498629607260227, 0.00272651226259768, 0.023505743592977524, 0.014960533007979393, -0.006100972183048725, 0.016910791397094727, 0.025853751227259636, -0.013433686457574368, -0.02217135578393936, -0.017167404294013977, 0.02344159036874771, 0.005077728070318699, -0.020503371953964233, 0.001876481925137341, -0.009225234389305115, 0.0032942683901637793, 0.03351364657282829, 0.03361629322171211, 0.011047186329960823, -0.019348613917827606, -0.02409595251083374, 0.04693450406193733, -0.01296536810696125, -0.01683380827307701, 0.0002499971305951476, -0.024070292711257935, 0.0018363861599937081, 0.013561992906033993, 0.005052066873759031, -0.01497336383908987, 0.014652597717940807, 0.009520339779555798, -0.022543445229530334, 0.004965459927916527, 0.005741714034229517, -0.012009484693408012, -0.003499558661133051, 0.011432105675339699, 0.013587654568254948, 0.02572544477880001, 0.005090558901429176, -0.02989540435373783, 0.01107926294207573, 0.011419274844229221, 0.006678351201117039, -0.027072662487626076, -0.0003121455665677786, 0.014498629607260227, 0.004721677862107754, -0.02043921872973442, -0.01273441594094038, 0.007903678342700005, -0.01922030746936798, -0.006290224380791187, -0.003582957899197936, 0.00644419202581048, -0.0017144951270893216, -0.017308540642261505, 0.01204797625541687, -0.00023395880998577923, 0.01571754179894924, -0.0002951048663817346, 0.019489752128720284, -0.031281113624572754, -0.001617463305592537, -0.03384724259376526, 0.0010473014554008842, -0.01011696457862854, 0.025302033871412277, -0.03451443836092949, 0.01784742809832096, -0.020298082381486893, 0.02201738767325878, -0.006392869167029858, -0.007133839186280966, 0.013626146130263805, -0.014845057390630245, -0.02344159036874771, 0.0018861049320548773, 0.010771327652037144, 0.015255638398230076, 0.0026623590383678675, -0.040493518114089966, -0.010796988382935524, 0.01116266194730997, -0.007403282914310694, 0.04180224612355232, 0.009488263167440891, -0.00927655678242445, 0.0038556091021746397, 0.0019839387387037277, -0.01992599293589592, -0.004365627188235521, 0.013587654568254948, 0.005914927925914526, -0.008051230572164059, -0.0016022268682718277, -0.016333412379026413, 0.0028820838779211044, 0.003374459920451045, -0.019605226814746857, 0.0038556091021746397, 0.0064538149163126945, 0.009719214402139187, -0.016692670062184334, -0.02572544477880001, 0.013792944140732288, -0.0036856031510978937, 0.002530844882130623, 0.013690299354493618, 0.019348613917827606, 0.01707758940756321, 0.0228770412504673, 0.01136153656989336, -0.0024378227535635233, 0.020452050492167473, -0.0003542461199685931, 0.021670961752533913, -0.020105622708797455, 0.010950956493616104, -0.004795453976839781, -0.0044586495496332645, 0.0185531135648489, -0.0019855424761772156, -0.005738506559282541, 0.019104832783341408, 0.03258984163403511, 0.011926085688173771, 0.0200799610465765, 0.004869230091571808, 0.010097718797624111, -0.03441179171204567, -0.005898889619857073, -0.01937427558004856, 0.016448888927698135, 0.01687229983508587, 0.016256429255008698, -0.004747339058667421, 0.00458695599809289, -0.0028596301563084126, 0.011252476833760738, 0.008198782801628113, 0.012323835864663124, 0.007095347158610821, 0.0022886665537953377, -0.0013400005409494042, -0.01375445257872343, 0.001554913935251534, 0.009712799452245235, -0.03420650213956833, -0.017860259860754013, -0.0038780628237873316, 0.00988601241260767, 0.024070292711257935, 0.024724654853343964, -0.006947794929146767, -0.0038780628237873316, -0.017860259860754013, 0.006607782561331987, 0.017039097845554352, 0.01360048446804285, 0.007037609349936247, 0.0044554416090250015, -0.02766287326812744, 0.008859560824930668, -0.00900069810450077, -0.020413557067513466, 0.02074715495109558, 0.0297414381057024, 0.010444145649671555, 0.021260380744934082, -0.018168194219470024, 0.013048767112195492, 0.019592396914958954, -0.004243736155331135, 0.006851565092802048, 0.003096997272223234, 0.003058505244553089, 
0.004712054971605539, -0.004388080909848213, 0.007736879400908947, -0.03715755045413971, -0.004705639556050301, 0.009398448280990124, 0.032256245613098145, 0.01174645684659481, 0.008987867273390293, -0.0002906943263951689, 0.017347034066915512, -0.01987467147409916, 0.011149831116199493, 0.0006046441849321127, -0.002838780404999852, -0.003916554618626833, -0.012092883698642254, 0.007845940068364143, -0.017372693866491318, -0.01850179210305214, 0.031127147376537323, -0.034694068133831024, 0.02038789726793766, 0.023146485909819603, 0.02054186351597309, -0.011990238912403584, 0.0037112643476575613, 0.00390051631256938, -0.012144206091761589, -0.012946121394634247, 0.03264116495847702, -0.005831528455018997, 0.005937381647527218, 0.002923783380538225, -0.006530798971652985, 0.037080567330121994, -0.05347813293337822, 0.04151996970176697, -0.004997536540031433, 0.03838929161429405, -0.0071787466295063496, 0.008910883218050003, -0.0071017625741660595, -0.017372693866491318, 0.028586680069565773, 0.00476658483967185, 0.01507600862532854, 0.035053323954343796, 0.0031771888025105, 0.002627074718475342, 0.011034355498850346, 0.01039923820644617, 0.03312872722744942, 0.014370323158800602, 0.016448888927698135, -0.017552323639392853, 0.022402307018637657, -0.0011683907359838486, -0.02612319588661194, 0.006652690004557371, -0.0005533216171897948, 0.0021715867333114147, -0.03315439075231552, 0.001250987988896668, -0.009546000510454178, 0.009161081165075302, 0.016808146610856056, -0.013805774971842766, 0.009770536795258522, -0.011733626015484333, -0.012901214882731438, -0.0004157931252848357, 0.0498342290520668, 0.026046210899949074, 0.0067232586443424225, 0.015217145904898643, 0.024570686742663383, -0.0075764963403344154, -0.011072847060859203, -0.037953052669763565, -0.009950165636837482, -0.019579565152525902, -0.0012301382375881076, 0.0024715031031519175, -0.0038812702987343073, 0.0040416535921394825, 0.019399937242269516, -0.020002977922558784, -0.00012860717833973467, -0.0072364844381809235, -0.0074353595264256, 0.002428199863061309, -0.011265306733548641, -0.00583473639562726, 0.0011788156116381288, 0.011643811129033566, 0.01342085562646389, -0.0044586495496332645, 0.03140942007303238, 0.014062387868762016, 0.010784157551825047, 0.006620613392442465, -0.008654270321130753, -0.0005336746689863503, -0.017321372404694557, 0.001589396269991994, -0.005799451842904091, 0.026302823796868324, -0.012484218925237656, -0.019040679559111595, 0.020862629637122154, 0.02088829129934311, -0.00010159265366382897, -0.004955837037414312, 0.00307614728808403, -0.012792154215276241, 0.009655061177909374, -0.04539482668042183, -0.03330835700035095, 0.042572084814310074, 0.030434291809797287, -0.01430616993457079, 0.009719214402139187, -0.0030360515229403973, -0.011913254857063293, 0.0016904376680031419, -0.003096997272223234, -0.019964484497904778, -0.02466050162911415, -0.01814253255724907, -0.008346335031092167, -0.006360792554914951, -0.030998840928077698, -0.007711218204349279, -0.0008051230106502771, -0.011137000285089016, -0.008256521075963974, -0.01839914545416832, -0.008506718091666698, -0.016743993386626244, -0.03156339004635811, 0.0007329506333917379, 0.02663642168045044, -0.02658509835600853, -0.024006139487028122, 0.03307740390300751, 0.03394988924264908, 0.011913254857063293, 0.011137000285089016, 0.0017866675043478608, 0.009975827299058437, 0.011021524667739868, -0.022427968680858612, -0.04749905318021774, -0.005347171798348427, 0.0036086190957576036, -8.866177086019889e-05, 0.020362235605716705, -0.02658509835600853, -0.006059272680431604, -0.00839124247431755, 0.02383933961391449, -0.00019957669428549707, 0.0019374275580048561, 0.017808936536312103, -0.021619638428092003, -0.0051803733222186565, -0.0012910837540403008, 0.009449770674109459, 0.039672356098890305, 0.002293477999046445, 0.0026238670106977224, 0.030870534479618073, -0.014601275324821472, -0.0057930368930101395, -0.03310306742787361, 0.013921250589191914, -0.0011900424724444747, -0.0006740098469890654, -0.004526010248810053, 0.006181163713335991, -0.0031755848322063684, 0.009789782576262951, 
-0.006909302901476622, 0.006476268637925386, 0.007050440181046724, -0.012035146355628967, 0.012715170159935951, 0.010283762589097023, 0.018027057871222496, 0.014691089279949665, 0.019810518249869347, 0.010245271027088165, -0.006293431855738163, 0.030382970348000526, 0.01585867814719677, -0.02353140525519848, 0.014203525148332119, 0.010989448055624962, -0.007807448040693998, -0.010405654087662697, -0.014768073335289955, -0.0012894799001514912, 0.00874408520758152, 0.0027473620139062405, -0.03551522642374039, -0.014190694317221642, 0.007948584854602814, 0.012798569165170193, 0.012753661721944809, -0.013331040740013123, -0.0261745173484087, 0.013132166117429733, -0.0029606716707348824, -0.008551625534892082, -0.01886104978621006, -0.029818421229720116, -0.030382970348000526, -0.005837943870574236, 0.0020593185909092426, 0.0013319813879206777, -0.0070632705464959145, 0.01683380827307701, -0.003932592924684286, -0.0009679118520580232, 0.009263725951313972, -0.016192276030778885, -0.015255638398230076, -0.02205588109791279, -0.01375445257872343, 0.03554088994860649, 0.009956581518054008, 0.04264906793832779, 0.014588444493710995, -0.00636720797047019, -0.0027345314156264067, 0.0003813107614405453, 0.004182790406048298, -0.006665520370006561, 0.014062387868762016, -0.021619638428092003, 0.020310912281274796, 
0.04406043887138367, 0.010136210359632969, 0.02897159941494465, -0.009655061177909374, 0.02140151709318161, 0.02090112306177616, 0.0025340525899082422, -0.004923760425299406, 0.0017385525861755013, -0.011521920561790466, -0.004574125166982412, 8.735865412745625e-05, -0.007371206302195787, -0.01839914545416832, -0.02602054923772812, 0.0032974760979413986, -0.0059053050354123116, -0.00787801668047905, 0.008782576769590378, -0.011278137564659119, 0.034334808588027954, -0.01961805857717991, 0.008833900094032288, -0.010347915813326836, 0.003746548667550087, -0.03985198587179184, -0.023723864927887917, 0.00015988187806215137, 0.011881178244948387, -0.005661522503942251, -0.0039069317281246185, 0.0005060086259618402, -0.010623774491250515, -0.006267770659178495, -0.003364836797118187, 0.029921066015958786, 0.0036022039130330086, -0.01911766268312931, -0.0019871462136507034, -0.000726535334251821, -0.026302823796868324, 0.00604964978992939, -0.02308233268558979, 0.021363025531172752, 0.02892027609050274, 0.019990146160125732, -0.015986984595656395, 0.02196606621146202, -0.007589327171444893, -0.02063167840242386, 0.010245271027088165, -0.010835480876266956, 0.039723679423332214, -0.01471675094217062, 0.02958746999502182, 0.032564178109169006, -0.012766492553055286, -0.013882759027183056, 0.010110548697412014, 
0.018950864672660828, 0.017308540642261505, 0.012663847766816616, 0.023723864927887917, -0.007428944110870361, -0.019951654598116875, -0.009796198457479477, 0.004939798731356859, -0.0083848275244236, -0.010540375486016273, 0.024570686742663383, 0.006312677636742592, 0.020118452608585358, -0.0034835203550755978, -0.017654968425631523, -0.0361054390668869, 0.019207477569580078, -0.013613315299153328, 0.002248570788651705, 0.023711033165454865, -0.011630980297923088, 0.0016286901663988829, 0.026508115231990814, -0.0014466553693637252, 0.03366761654615402, 0.010976617224514484, -0.015512251295149326, -0.004615824669599533, -0.01204797625541687, 0.00615229457616806, -0.006354377605021, -0.006235694047063589, 0.02328762225806713, 0.011521920561790466, -0.023197807371616364, -0.00044947356218472123, 0.028535356745123863, 0.004490726161748171, -0.0015084028709679842, 0.004888476338237524, 0.017154574394226074, -0.013112920336425304, -0.01342085562646389, -0.011701549403369427, 0.0017722329357638955, 0.014088049530982971, 
0.007114593405276537, 0.012009484693408012, 0.007473851088434458, -0.0056935991160571575, 0.0261745173484087, 0.02354423515498638, -0.010476222261786461, -0.01552508119493723, -0.026764728128910065, -0.02135019563138485, -0.020606016740202904, -0.02476314641535282, -0.006780996453016996, -0.015319791622459888, -0.025225050747394562, -0.042161501944065094, -0.014267678372561932, -0.0008219632436521351, 0.020567525178194046, -0.01937427558004856, -0.01349783968180418, 0.014652597717940807, 0.01184910163283348, -0.004259774461388588, 0.006947794929146767, 0.0006655897595919669, 0.005879643373191357, -0.02663642168045044, -0.01390842068940401, 0.015537912026047707, -0.03595146909356117, -0.00275056972168386, -0.0017834597965702415, -0.028201760724186897, -0.01997731626033783, 0.015537912026047707, -0.007422528695315123, -0.00322209601290524, -0.028791969642043114, -0.01585867814719677, 0.02409595251083374, 0.01184910163283348, -0.02510957419872284, -0.01265743188560009, 0.05855906754732132, 0.000647947599645704, 4.508268102654256e-05, 0.026508115231990814, 0.004365627188235521, 0.018078379333019257, 0.018514622002840042, 0.005113012623041868, 0.02546883188188076, -0.009911674074828625, 0.00041779791354201734, 0.013080843724310398, 0.022530613467097282, 0.005327925551682711, -0.02093961462378502, -0.0045933714136481285, -0.0004779415612574667, -0.020580356940627098, -0.009039189666509628, 0.022889873012900352, -0.021478502079844475, 0.005340756382793188, 0.03554088994860649, -0.006559667643159628, 0.009456186555325985, -0.017757613211870193, -0.02064451016485691, 0.015537912026047707, -0.009642230346798897, -0.012086468748748302, 0.009295802563428879, -0.016359074041247368, 0.031691696494817734, 0.001453070668503642, -0.021234719082713127, -0.04295700415968895, -0.003829947905614972, -0.03833797201514244, 0.01375445257872343, -0.006123425904661417, 0.011560412123799324, 0.007890847511589527, 0.01184268668293953, 0.0010456976015120745, 0.047345083206892014, -0.005084143485873938, 0.013485008850693703, 0.0012983010383322835, -0.008609363809227943, -0.009270141832530499, 0.0030168057419359684, 0.0007558052311651409, 0.006546837277710438, -0.0065500447526574135, -0.025430340319871902, 0.00996299646794796, 0.009218819439411163, -0.013485008850693703, 0.0350789874792099, -0.002298289444297552, -0.021273210644721985, 0.00613946421071887, 0.008448980748653412, 0.034232161939144135, -0.012189113534986973, 0.01021960936486721, -0.032564178109169006, -0.01168871857225895, -0.0026190555654466152, 0.009802613407373428, -0.0057930368930101395, -0.00658212136477232, 0.003114639315754175, -0.008166706189513206, 0.003692018333822489, -0.012695924378931522, -0.020965276286005974, 0.00798066146671772, -0.039133470505476, 0.0016286901663988829, 0.0032541726250201464, 
-0.010174701921641827, 0.0018973317928612232, 0.013972573913633823, -0.010995863936841488, -0.00010344708425691351, 0.0026848127599805593, -0.01652587205171585, -0.0028965184465050697, 0.007724049035459757, -0.038209665566682816, -0.014293340034782887, -0.008198782801628113, 0.0027585888747125864, -0.022427968680858612, 0.00988601241260767, -0.003910139203071594, -0.01497336383908987, -0.034540098160505295, 0.01824517920613289, -0.00968713779002428, -0.00823727436363697, -0.010059226304292679, 0.0038748551160097122, -0.0111819077283144, -0.010668681934475899, -0.02359555847942829, 
0.009039189666509628, -0.028586680069565773, 0.018822558224201202, -0.00164553034119308, -0.020041469484567642, -0.04639561474323273, -0.006466645747423172, -0.015460927970707417, -0.010707174427807331, -0.006890057120472193, 0.21514427661895752, -0.020375065505504608, 0.010354331694543362, 0.02354423515498638, -0.0029558599926531315, 0.021273210644721985, 0.02196606621146202, 0.01456278283149004, -0.0054466091096401215, 0.016500210389494896, -0.007332714274525642, 0.006107387598603964, -0.0090199438855052, 0.006232486106455326, 0.001279055024497211, -0.018642928451299667, -0.042418114840984344, -0.013055182062089443, 0.011714380234479904, 0.00032096661743707955, -0.008647855371236801, 0.00839124247431755, 0.012240435928106308, -0.021478502079844475, 0.03513030707836151, 0.004904514644294977, -0.008275766856968403, 0.012086468748748302, 0.004086560569703579, -0.0045901634730398655, -0.011239646002650261, 0.006299847271293402, -0.007069685962051153, 0.014100880362093449, -0.0013456139713525772, -0.02277439646422863, 0.020105622708797455, 0.008904468268156052, 0.01800139620900154, 0.01621793583035469, -0.0028195343911647797, -0.011137000285089016, 0.006081726402044296, -0.016089629381895065, -0.023929154500365257, 0.025096744298934937, 0.00027124787447974086, -0.0037593792658299208, -0.012548372149467468, 0.004862814676016569, 0.006652690004557371, -0.025789598003029823, 0.031948309391736984, 0.03651601821184158, -0.00993733573704958, -0.013703130185604095, 0.007351960055530071, -0.01227892842143774, -0.024570686742663383, -0.015640556812286377, 0.013664637692272663, 0.010213194414973259, -0.01238157320767641, 0.027483243495225906, -0.019451258704066277, 0.018899541348218918, -0.007024778518825769, -0.0006503533804789186, -0.0009262122330255806, -0.013080843724310398, -0.019399937242269516, -0.020952444523572922, 0.002202059607952833, 0.015435267239809036, -0.02267175167798996, -0.013587654568254948, 0.007993492297828197, 0.008513133972883224, 0.00927655678242445, 0.006315885577350855, -0.004651109222322702, 0.002766608027741313, -0.0015292526222765446, -0.023261960595846176, -0.012432895600795746, -0.03803003579378128, 0.033026084303855896, 0.0023287623189389706, 0.00592455081641674, -0.006161917932331562, 0.00024097556888591498, -0.0004983904073014855, -0.028022130951285362, -0.02195323444902897, 0.019643718376755714, 0.020105622708797455, 0.006014365237206221, 0.010027149692177773, -0.0036310728173702955, -0.01049546804279089, -0.01952824369072914, 0.06071461737155914, 0.027996469289064407, 0.009026359766721725, -0.01795007288455963, -0.0008516341331414878, 0.011470597237348557, 0.018694251775741577, 0.02394198626279831, -0.02013128437101841, -0.01825800910592079, -0.010437730699777603, 0.02485296130180359, -0.010226025246083736, 0.016102461144328117, -0.015743203461170197, 0.011926085688173771, -0.023775186389684677, 0.004583748057484627, -0.0249042846262455, 0.00013542345550376922, -0.027123985812067986, 0.017770444974303246, 0.006614197976887226, -0.0032301151659339666, -0.0162692591547966, -0.010643021203577518, -0.009924504905939102, 0.0302546638995409, -0.043547213077545166, 0.01880972646176815, -0.014845057390630245, 0.006992701906710863, -0.007717633619904518, -0.009494678117334843, 0.01430616993457079, -0.0031595465261489153, -0.013638976961374283, -0.0030232209246605635, -0.02495560608804226, -0.0008797011687420309, -0.014434476383030415, 0.004150713793933392, -0.007287806831300259, -0.012766492553055286, 0.0034771051723510027, 0.0015685465186834335, -0.020092790946364403, -0.016795314848423004, -0.026610760018229485, -0.009327879175543785, -0.0015637349570170045, 0.022427968680858612, -0.01168871857225895, 0.02454502508044243, -0.010251685976982117, -0.009045605547726154, -0.040596164762973785, -0.02450653351843357, 0.017295710742473602, -0.031999632716178894, -0.003058505244553089, 0.028586680069565773, 0.021170565858483315, -0.026816049590706825, -0.007082516793161631, -0.1621793657541275, 0.01839914545416832, 0.01084831077605486, -0.010379992425441742, -0.014011065475642681, 0.015884339809417725, 0.027945147827267647, 0.0017385525861755013, -0.022299662232398987, -0.016230767592787743, 0.028945937752723694, -0.0019374275580048561, -0.016282089054584503, -0.0017706291982904077, 0.005606992170214653, -0.02632848545908928, -0.00392938544973731, -0.006954210344702005, 0.007300637662410736, 0.02648245356976986, 0.0070632705464959145, -0.028843292966485023, 0.022581936791539192, -0.022607598453760147, 0.007454605307430029, 0.03649035841226578, 0.005260564852505922, 0.015281299129128456, -0.006473060697317123, -0.00294142565689981, -0.03125545382499695, 0.008692762814462185, -0.0006900481530465186, 0.019104832783341408, 0.02328762225806713, -0.028073454275727272, -0.01023885514587164, 0.01601264625787735, -0.010886803269386292, -0.0015348660526797175, 0.004015992395579815, 0.012580448761582375, 0.00927655678242445, -0.0005044047720730305, -0.02176077477633953, 0.014088049530982971, 0.005584538448601961, 0.0026463207323104143, -0.00011347102554282174, -0.008917299099266529, -0.017359863966703415, -0.016307750716805458, 0.005299056880176067, -0.015794524922966957, 0.003193227108567953, 0.00919957272708416, 0.021478502079844475, 0.022299662232398987, -0.013638976961374283, 0.012843476608395576, -0.011675887741148472, -0.02876630797982216, -0.0133438715711236, -0.00429505854845047, 0.003082562703639269, -0.020708663389086723, -0.02344159036874771, -0.01375445257872343, -0.028150437399744987, 0.008096138015389442, 0.018565945327281952, -0.022800058126449585, 0.028638001531362534, -0.02079847641289234, 0.017911581322550774, -0.014626936055719852, -0.019913163036108017, -0.0006683964747935534, -0.005632653366774321, 0.009744876064360142, -0.009052020497620106, 0.03412951901555061, -0.016153782606124878, -0.00993733573704958, -0.0015140161849558353, 0.001831574714742601, 0.014280509203672409, -0.014177863486111164, 0.02170945331454277, -0.018411977216601372, 0.009995073080062866, -0.018694251775741577, -0.0009438543929718435, -0.03143508359789848, 0.03307740390300751, 0.03620808199048042, -0.003829947905614972, -0.005289433989673853, -0.000507211487274617, 0.0032365303486585617, 0.01798856630921364, -0.0025645254645496607, -0.03584882616996765, 0.02430124394595623, 0.03602845221757889, 0.010764911770820618, -0.056044261902570724, 0.0003019211289938539, 0.02740626037120819, 0.008763330988585949, 0.0023736695293337107, 0.007339129690080881, 0.01308725867420435, 0.008532379753887653, -0.020618848502635956, 0.031640373170375824, 0.019592396914958954, -0.011586073786020279, -0.004413742106407881, 0.007531589362770319, 0.04957761615514755, 0.01357482373714447, 0.00010114157339558005, 0.02419859915971756, -0.005735298618674278, -0.009205988608300686, -0.10110548883676529, 0.0020801685750484467, 0.0053888713009655476, 0.010386408306658268, -0.010501883924007416, 0.02725229226052761, -0.00242178444750607, 0.006890057120472193, -0.008128214627504349, 0.003627865109592676, -0.024775978177785873, -0.02145284041762352, -0.0011427294230088592, -0.0133438715711236, 0.014626936055719852, -0.009802613407373428, -0.013857097364962101, -0.019284460693597794, -0.03294909745454788, 0.006729673594236374, -0.0027730234432965517, 0.00909692794084549, 0.003425782546401024, -0.00211705663241446, -0.002044884255155921, -0.002529241144657135, -0.029048582538962364, 0.009738460183143616, 0.006704012397676706, -0.027021341025829315, 0.02206871099770069, -0.028714986518025398, 0.004269397351890802, -0.018488960340619087, 0.0016936452593654394, -0.02419859915971756, -0.04305964708328247, -0.014100880362093449, 0.028381388634443283, -0.013728790916502476, 0.008718423545360565, 0.005308679770678282, 0.021067921072244644, -0.022761566564440727, -0.02469899319112301, -0.010707174427807331, -0.014511460438370705, 0.02963879145681858, -0.01997731626033783, -0.005982288625091314, -0.021234719082713127, 0.00996299646794796, -0.031383760273456573, -0.018411977216601372, 0.026161687448620796, 0.003865231992676854, -0.01316424272954464, -0.002569336909800768, -0.022197017446160316, -2.8944132282049395e-05, -0.0005761762149631977, -0.01927163079380989, -0.04331625998020172, -0.030023710802197456, 0.014293340034782887, 
-0.00164553034119308, -0.008692762814462185, 0.012144206091761589, -0.013882759027183056, 0.0025035797152668238, 0.02140151709318161, 0.016051137819886208, -0.0167824849486351, -0.0033103066962212324, -0.027739856392145157, -0.007486681919544935, -0.03695226088166237, -0.009481847286224365, 0.025905074551701546, 0.010110548697412014, -0.02023392915725708, 0.0011066432343795896, -0.008282181806862354, -0.010610944591462612, 0.0073455446399748325, 0.023454420268535614, 0.025840921327471733, 0.0017722329357638955, 0.012157036922872066, -0.015614896081387997, -0.00744818989187479, 0.019053509458899498, 0.015178654342889786, -0.0006856376421637833, -0.030023710802197456, 0.015563573688268661, -0.023095162585377693, 0.012169867753982544, 0.0081346295773983, -0.007634234149008989, -0.0009542792686261237, -0.009327879175543785, -0.03274380788207054, 0.01764213852584362, 0.006736089009791613, -0.02958746999502182, 0.0024987682700157166, -0.023852171376347542, 0.012163452804088593, 0.005809075199067593, 0.01461410615593195, 0.008429734036326408, -0.014524291269481182, 0.014768073335289955, 0.011194738559424877, -0.0028259498067200184, -0.01931012235581875, 0.0297414381057024, 0.030588259920477867, -0.0008103355066850781, 0.02459634840488434, -0.01819385588169098, -0.023018179461359978, -0.030844872817397118, 0.03851759806275368, 0.020105622708797455, -0.037337180227041245, 0.02047771029174328, -0.008320674300193787, 0.011586073786020279, -0.014780904166400433, -0.012612525373697281, 0.03015201725065708, -0.02272307313978672, -0.018899541348218918, 0.0031082239001989365, 0.004888476338237524, -0.013767283409833908, 0.0010489053092896938, 0.02013128437101841, 0.019451258704066277, 0.03228190541267395, -0.0238906629383564, -0.016962114721536636, 0.015833016484975815, -0.011021524667739868, 0.028022130951285362, 0.010200363583862782, -0.02907424420118332, 0.009327879175543785, 0.003939008340239525, -0.024031799286603928, -0.012670262716710567, 0.023813679814338684, -0.030485615134239197, -0.014986194670200348, 0.0017433640314266086, -0.01571754179894924, 0.01692362129688263, -0.0005144287133589387, 0.01202231552451849, 0.007056855130940676, 0.03767077624797821, 0.006553252227604389, 0.018989356234669685, -0.019695041701197624, 0.0249171145260334, 0.012695924378931522, -0.004930175840854645, 0.015691880136728287, -0.0049365912564098835, -0.03287211433053017, -0.02714964747428894, 0.014421646483242512, 0.008481057360768318, 0.017962904646992683, 0.011752871796488762, 0.014165033586323261, 0.007916508242487907, 0.017218727618455887, -0.007922924123704433, -0.004737716168165207, 0.007987077347934246, -0.005539631471037865, -0.01479373499751091, 0.0029109527822583914, 0.022941194474697113, -0.0036759800277650356, 0.0020641302689909935, 0.026764728128910065, 0.03176867961883545, -0.0003450240765232593, -0.010129795409739017, 0.0119453314691782, 0.0020208267960697412, -0.002365650376304984, 0.007820278406143188, -0.01992599293589592, -0.004481103271245956, 0.015114501118659973, 0.0026783973444253206, 0.031024502590298653, 0.03720887377858162, 0.005087350960820913, 0.001813932554796338, -0.025096744298934937, -0.030023710802197456, 0.00984110590070486, -0.04128902032971382, -0.02907424420118332, -0.015345452353358269, 0.008718423545360565, -0.011380783282220364, 0.010931710712611675, 0.002158756135031581, 0.017411187291145325, 0.011874763295054436, 0.02023392915725708, 0.0022742319852113724, -0.03207661584019661, -0.007659895811229944, 0.00359578849747777, 0.009161081165075302, 0.030331647023558617, 0.01666700839996338, -0.03674697130918503, 0.023313283920288086, 0.0037497563753277063, 0.016102461144328117, -0.04095542058348656, 
0.0025051836855709553, -0.0051033892668783665, 0.01238157320767641, 0.0009879597928375006, -0.02114490419626236, -0.009789782576262951, -0.0007092941668815911, 0.0067617506720125675, 0.02730361558496952, 0.01049546804279089, -0.013433686457574368, 0.056762777268886566, 0.013882759027183056, -0.007621403783559799, 0.006620613392442465, -0.0029334065038710833, 0.004946214146912098, 0.01978485658764839, 0.011701549403369427, -0.0029783137142658234, -0.02191474288702011, 0.030331647023558617, 0.00859011709690094, -0.001898935646750033, -0.02658509835600853, -0.026662081480026245, -0.0017594023374840617, -0.01978485658764839, 0.005039236042648554, 0.002753777429461479, 0.01512733194977045, 0.012804985046386719, 0.006466645747423172, 0.02430124394595623, -0.009712799452245235, -0.010097718797624111, 0.008108967915177345, 0.03389856591820717, -0.020349403843283653, 0.008609363809227943, -0.03838929161429405, 0.010097718797624111, 0.00069886923301965, -0.009982242248952389, 0.0076919724233448505, 0.021619638428092003, -0.021221889182925224, 0.017667800188064575, 0.006845149677246809, 0.04108372703194618, -0.014947702176868916, 0.004432988353073597, 0.009693552739918232, -0.01108567789196968, -0.00665910542011261, -0.014395984821021557, 0.0032076614443212748, 0.0007489889394491911, 0.00013662633136846125, -0.01693645305931568]
    
class CheckerFeedbackPrompt:
    revise_code_hallucination = "Your code snippet is not correct as it contains parts that are not included in provided sources. Only use and combine example code in provided source."


class ChatMultiSearchPrompt:
    # Chat roles
    SYSTEM = "system"
    USER = "user"
    ASSISTANT = "assistant"

#     system_message = """Based on the conversation history and latest message, extract main questions needed to be answered in the latest message. Include the scenario in the questions if it provides clear context.
# Return the list of found questions ONLY. Do not use numbering, bullet points, introduction and titles.
# One line per question and associated scenario.
# If no questions found, return "0" only and do not explain anything else.
# """
# Return the list of found questions ONLY. Do not use numbering, bullet points, introduction and titles.
    system_message = """Based on the conversation history, extract explicit requests/questions in the customer message and summarize the context of them for others to understand without requiring reading the conversation history and message.
Each request/question must be independent from others.
Respond a Python list of requests/questions.
If no requests found, respond empty list [].
"""

    user_message_template = """Conversation history:
{chat_history}
Customer message:
```
{message}
```
Extracted requests:"""

    few_shots = [
        {'role': USER,
         'content': """Conversation history: []
Customer message:
```
I have got an issue with my program. My screen turned blue after running the command 'avz hello-world.ccs'. But when I restarted the computer, the program was launched at start up. What is causing the issue and how can I resolve this issue?
```
Extracted requests:"""},

        {'role': ASSISTANT,
         'content': """["The screen turned blue after running the command 'avz hello-world.ccs'. But when restarting the computer, the program was launched at start up. How to resolve this issue?",
"The screen turned blue after running the command 'avz hello-world.ccs'. But when restarting the computer, the program was launched at start up. What is causing this issue?"]"""},

        {'role': USER,
         'content': """Conversation history:
[{"user": "I have got an issue with my program. My screen turned blue after running the command 'avz hello-world.ccs'. But when I restarted the computer, the program was launched at start up. What is causing the issue and how can I resolve this issue?"},
{"assistant": "Hi, you just need to restart the computer. The low memory is causing this error"}]
Customer message:
```
What does the command do? Are there any other commands to do that?
```
Extracted requests:"""},

         {'role': ASSISTANT,
         'content': """["What does the command 'avz hello-world.ccs' do?",
"Are there any other commands to do the same thing as the command 'avz hello-world.ccs' does?"]"""},

         {'role': USER,
         'content': """Conversation history:
[{"user": "I have got an issue with my program. My screen turned blue after running the command 'avz hello-world.ccs'. But when I restarted the computer, the program was launched at start up. What is causing the issue and how can I resolve this issue?"},
{"assistant": "Hi, you just need to restart the computer. The low memory is causing this error"},
{"user": "What does the command do? Are there any other commands to do that?"},
{"assistant": "The command will print out to the screen a welcome message. There is no other command to do the same thing"}]
Customer message:
```
Please provide me with a Python source code to print out a series of number
```
Extracted requests:"""},

         {'role': ASSISTANT,
         'content': """["Please provide me with a Python source code to print out a series of number"]"""},
    ]

    temperature_merge_answer = 0.0

    system_message_merge_answer = """
Given a collection of LuxAI Support FAQ, generate a response to the customer message as if you are a member of LuxAI Support team.
Preserve and include all the citation content in square bracket [].
Preserve and include all the code snippet in triple backstick ``` ``` in the answer.
Preserve all the details of every instruction.
Answer covers the most sentences relevant to the customer requests.

Short example:
<example>
Customer message:
```
Hi, I am writing a Python program to make the robot to speak and detect my hand gesture.
```

LuxAI Support FAQ:
```
Request 1: python text-to-speech
Answer: You must use the tts library to enable the robot to speak [doc1.md]. Otherwise, you must integrate a Google library [doc30.txt]
----------
Request 2: python detect hand gesture.
Answer: Nuitrack offers a powerful library for hand gesture detection [doc2.txt]. You can try it.
```

Response: 
Hello,

For your first question related to text-to-speech, you should use tts library [doc1.md] or a Google library [doc30.txt].
For the second question, you can use Nuitrack supported library for hand gesture detection [doc2.txt]

Thanks.
</example>
"""

    user_content_merge_answer = """Customer message:
```
{customer_message}
```

LuxAI Support FAQ:
```
{raw_answer}
```

Response:
"""

class IntentClassificationPrompt:
    
    # "Could you provide me with a source code?"
    request_code_vector = [-0.007403835654258728, -0.006315232254564762, -0.015433534979820251, -0.026019955053925514, -0.004477589391171932, 0.010306778363883495, -0.0020806642714887857, 0.010067085735499859, -0.02382277324795723, 0.004757230635732412, 0.021052993834018707, 0.02455516718327999, 0.015087312087416649, -0.009541094303131104, -0.007776690647006035, 0.007050954736769199, 0.024728277698159218, -0.00013576334458775818, -0.001990779535844922, -0.006488343235105276, 0.00997387245297432, 0.02191855013370514, -0.005283222533762455, -0.004361072089523077, -0.017803827300667763, 0.021678857505321503, 0.01994774490594864, -0.013808952644467354, -0.019734684377908707, -0.018416374921798706, 0.05105450749397278, -0.006764655467122793, -0.031133394688367844, -0.022211506962776184, -0.02382277324795723, 0.010027136653661728, 0.008222784847021103, 0.0013108184793964028, 0.012097814120352268, -0.015233791433274746, 0.028310349211096764, 0.0155933303758502, 0.00456081610172987, -0.012783600948750973, 0.0020373864099383354, 0.004893722478300333, -0.019135452806949615, -0.009248136542737484, -0.026113169267773628, 0.01627245917916298, 0.0020789997652173042, 0.019534939900040627, -0.012377455830574036, -0.02900279499590397, -0.020573608577251434, 0.013342883437871933, -0.0011984625598415732, 0.00436440110206604, 0.011798198334872723, -0.01573980785906315, 0.013742371462285519, 0.0023702927865087986, -0.014581294730305672, -0.017164647579193115, -0.023117011412978172, -0.007703451439738274, -0.0028063999488949776, 0.009467854164540768, 0.001523878425359726, -0.021998446434736252, 0.015327004715800285, 0.014687824994325638, -0.021345950663089752, 0.01797693967819214, 0.02408909797668457, -0.0003532967821229249, -0.002123942133039236, 0.009474512189626694, -0.010806137695908546, -0.004104734398424625, 0.014061961323022842, -0.016432253643870354, -0.019348513334989548, 0.015446851029992104, 5.3134961490286514e-05, 0.01315645594149828, -0.0033723406959325075, 0.03414286673069, -0.027644537389278412, -0.026672450825572014, 0.026725715026259422, 0.025633784011006355, -0.007630211766809225, 0.008675538003444672, -0.006308573763817549, 0.003422276582568884, -0.010366701520979404, 0.03456898778676987, 0.0012392436619848013, -0.002496797125786543, -0.0007128355791792274, -0.005612799897789955, -0.04096078872680664, -0.002734825015068054, -0.007690134923905134, -0.0035787425003945827, 0.020560292527079582, -0.010846086777746677, 0.025220979005098343, -0.006048907060176134, -0.027617905288934708, 0.02454185113310814, 0.005519586149603128, -0.026272963732481003, -0.005895770154893398, 0.013808952644467354, 0.007024322636425495, -0.011924702674150467, -0.023117011412978172, 0.01588628813624382, -0.003129319055005908, 0.0073772030882537365, 0.022144924849271774, -0.006588215008378029, 0.008102938532829285, 0.010653001256287098, -0.011924702674150467, -0.015966184437274933, -0.020826617255806923, -0.016099346801638603, 0.038031212985515594, 0.012870156206190586, 0.011352104134857655, 0.006255309097468853, -0.03978895768523216, 0.050255533307790756, -0.022131608799099922, 0.017604084685444832, -0.016525467857718468, -0.022557729855179787, 0.020307281985878944, 0.024714961647987366, 0.01679179258644581, -0.03440919145941734, -0.011591796763241291, 0.0062386635690927505, 0.021092941984534264, -0.009541094303131104, 0.0003736873040907085, -0.007530339993536472, 0.012970028445124626, 0.01267041265964508, -0.0026515985373407602, 0.033636849373579025, -0.006767984479665756, 0.004337769001722336, -0.00948782917112112, 0.010013820603489876, -0.003300765762105584, -0.0025367457419633865, 0.001698654261417687, -0.02278410643339157, 0.011198966763913631, -0.014874252490699291, 0.0008385076653212309, 0.03289113938808441, 0.02704530581831932, 
-0.03275797888636589, 0.0032008937560021877, -0.005050188396126032, -0.018789229914546013, 0.024714961647987366, -0.014261704869568348, -0.007836613804101944, 0.004297819919884205, 0.03110676258802414, 0.005899099167436361, 0.003981559071689844, -0.01961483806371689, -0.011352104134857655, -0.007290647365152836, 0.003076053922995925, 0.022411251440644264, 0.009614333510398865, -0.016885006800293922, 0.0016578732756897807, -0.00017363142978865653, -0.015380269847810268, 0.006634822115302086, -0.008981811814010143, 0.007270673289895058, -0.010100376792252064, -0.007989750243723392, -0.023596396669745445, -0.6626166701316833, -0.052412763237953186, -0.006924450397491455, -0.02823045291006565, 0.02206502854824066, 0.03683274984359741, -0.0016337375855073333, 0.002916258992627263, -0.040135182440280914, 0.02625964768230915, -0.008329315111041069, 0.017484238371253014, 0.011405369266867638, -0.016685262322425842, 0.012124446220695972, -0.02823045291006565, 0.005899099167436361, -0.01075953058898449, -0.000699935422744602, -0.019441725686192513, -0.01358257606625557, 0.0006408445769920945, 0.0031193317845463753, 0.00850242655724287, 0.008289366029202938, 0.0008588982163928449, -0.01234416477382183, -0.019601522013545036, 0.009740837849676609, 0.009321375750005245, -0.0031659386586397886, 0.016951587051153183, 0.005186679773032665, -0.00605556508526206, 0.0459410659968853, -0.037977948784828186, -0.00398821709677577, 0.0096809146925807, -0.005316513124853373, 0.03275797888636589, -0.013888849876821041, -0.0001397166051901877, 0.009434564039111137, 0.01628577522933483, -0.018802545964717865, -0.006271954160183668, 0.020507026463747025, 0.004740585573017597, -0.00807630643248558, 0.016631998121738434, 0.0036619689781218767, -0.01687169075012207, 0.00954775232821703, -0.002531752223148942, 0.0007548650028184056, -0.003076053922995925, 0.030414316803216934, -0.027910862118005753, -0.006305244751274586, 0.0039416104555130005, -0.007876562885940075, 0.030014829710125923, 0.014594610780477524, -0.01679179258644581, 0.034036338329315186, -0.005855821538716555, -0.024914706125855446, -0.012956712394952774, -0.001982456771656871, -0.004557487089186907, 0.007989750243723392, -0.010866060853004456, -0.03257155045866966, 0.016352355480194092, -0.0030144662596285343, 0.029482180252671242, -0.0010245190933346748, -0.022491147741675377, 0.00044234920642338693, -0.009847368113696575, -0.0008418367360718548, -0.016192561015486717, -0.05267908796668053, -0.003260816913098097, 0.020054273307323456, 0.01882917992770672, -0.03379664570093155, 0.0024601772893220186, 0.0016270794440060854, 0.0009362989221699536, 0.021998446434736252, 0.02868320420384407, 0.012736993841826916, -0.004534183535724878, -0.014914201572537422, 0.05619458109140396, -0.005013568326830864, -0.019308563321828842, 0.020507026463747025, -0.010266829282045364, -0.004191290121525526, 0.0034522381611168385, -0.0026382822543382645, -0.006851211190223694, 0.02159895934164524, -0.013888849876821041, -0.010879376903176308, 0.03235848993062973, 0.03358358517289162, 0.010519837960600853, -0.02532750926911831, 0.0032042230013757944, 0.012084498070180416, -0.0006966064102016389, -0.0023037113714963198, -0.02584684267640114, 0.00892854668200016, 0.010053769685328007, -0.0006878675776533782, 0.01109243743121624, 
-0.00826939195394516, 0.02462174743413925, 0.001959153451025486, -0.011764908209443092, 0.004567474126815796, 0.029242487624287605, -0.0014306646771728992, -0.009367982856929302, 0.004670674912631512, -0.01125888992100954, -0.007690134923905134, 0.012950054369866848, -0.0004494234744925052, -0.021412530913949013, 0.01325632818043232, 0.0005821698578074574, 0.03851059824228287, -0.021891916170716286, -0.017164647579193115, -0.0038084478583186865, 
-0.018589487299323082, 0.008688854053616524, 0.0018642751965671778, -0.013143139891326427, 0.02151906117796898, -0.0011526879388839006, -0.010419966652989388, -0.0018559525487944484, -0.0008788725826889277, 0.013402806594967842, -0.0096809146925807, -0.0167252104729414, 0.0017003187676891685, 0.004074772819876671, 0.010513179935514927, -0.010739556513726711, -0.01581970602273941, -0.03033442050218582, 0.01968141831457615, -0.007543656043708324, 0.02342328615486622, 0.014301653951406479, -0.01799025572836399, -0.0015813048230484128, 0.018682699650526047, -0.005066833458840847, 0.003788473317399621, 0.02953544445335865, -0.012277583591639996, -0.034489091485738754, 0.014208439737558365, -0.005249931942671537, -0.0012825214071199298, 0.021106258034706116, -0.0009770799661055207, 0.021119574084877968, -0.018536221235990524, -0.014914201572537422, -0.009674256667494774, -0.010326752439141273, 0.00830934103578329, 0.01240408793091774, -0.02139921486377716, -0.004637384321540594, 0.034675516188144684, 0.027351580560207367, -0.008915229700505733, 0.027617905288934708, 0.010399991646409035, 0.014820987358689308, 0.012816892005503178, 0.01757745072245598, -0.009208187460899353, 0.018935708329081535, -0.0024818163365125656, 0.002458512783050537, -0.004021507687866688, 0.004733927082270384, 0.0074304682202637196, 0.021092941984534264, 0.031080130487680435, 0.007969776168465614, -0.008449161425232887, -0.01122559979557991, -0.012390771880745888, -0.017084749415516853, -0.005735975224524736, -0.02290395274758339, 0.012284241616725922, 0.003139306092634797, -0.007197433616966009, 0.009740837849676609, 0.016259143128991127, -0.014314970001578331, -3.355071021360345e-05, 0.01771061308681965, -0.005925731733441353, 0.00042320709326304495, -0.0005655245622619987, 0.0016154276672750711, 0.013369516469538212, 0.01988116279244423, 0.026752348989248276, -0.018522905185818672, -0.016778476536273956, -0.011525215581059456, 0.0057492912746965885, 0.040987420827150345, -0.005206654313951731, -0.02440868876874447, -0.000836427032481879, -0.031799208372831345, 0.010659659281373024, -0.0010744549799710512, 0.02420894429087639, 0.02278410643339157, -0.024195628240704536, -0.012031232938170433, 0.009840709157288074, -0.008802042342722416, 0.00896183680742979, 0.004847115371376276, 0.022357985377311707, -0.02567373216152191, 0.0030993574764579535, 0.005582838319242001, 0.022610994055867195, 0.01719127967953682, -0.016845056787133217, 0.0017693968256935477, -0.028843000531196594, 0.0064017875120043755, -0.008395896293222904, 0.002947885077446699, -0.01053315494209528, 0.0030960284639149904, -0.010266829282045364, 0.011898070573806763, 0.03374338150024414, 0.014155174605548382, 0.013575918041169643, 0.004927013069391251, 0.008216126821935177, -0.014887568540871143, -0.0006637318874709308, -0.00454749958589673, -0.03187910467386246, 0.0025217649526894093, 0.007923169061541557, -0.01745760440826416, -0.02223813906311989, 0.002277079038321972, 0.0064583816565573215, -0.00846247747540474, 0.035474494099617004, -0.001265876111574471, 0.01456797868013382, 0.020520342513918877, -0.008082964457571507, 0.005519586149603128, -0.05390418320894241, -0.006212031003087759, 0.01740434020757675, 0.008069648407399654, 0.002979511162266135, -0.012903447262942791, -0.01772393099963665, 0.015446851029992104, -0.013349541462957859, 0.013955431059002876, -0.015340321697294712, 0.008762093260884285, -0.00043902016477659345, 0.004594106692820787, -0.007450442295521498, 0.007144168484956026, 0.019321881234645844, -0.021146206185221672, -0.0035953877959400415, 0.018869128078222275, 0.019388461485505104, 0.011531873606145382, -0.02368961088359356, 0.0009396279929205775, 0.030733907595276833, 0.006032261531800032, 0.012950054369866848, -0.011585138738155365, 0.0013749029021710157, -0.04279842972755432, -0.015353637747466564, 0.0011843140237033367, 0.017071433365345, -0.009234820492565632, -7.433172868331894e-05, -0.019188717007637024, -0.0014256711583584547, 0.00022034233552403748, 0.014847620390355587, 0.00990729033946991, -0.004411008208990097, -0.017417656257748604, 0.004474260378628969, -0.005702684633433819, 0.05518254265189171, 0.014381551183760166, 0.011591796763241291, 0.005073491483926773, 0.002741483272984624, -0.009960555471479893, -0.0031909067183732986, -0.010586420074105263, 0.023396654054522514, -0.02081330120563507, 0.0073772030882537365, -0.006088855676352978, -0.013336225412786007, 0.013409464620053768, 0.0034755414817482233, -0.01653878390789032, 0.030680643394589424, -0.013902165926992893, 0.007497049402445555, -0.02637949399650097, -0.007630211766809225, 0.038563862442970276, 0.011432001367211342, 0.024661697447299957, 0.0031160027720034122, 0.007856587879359722, 0.02913595736026764, 0.023476550355553627, -0.0011410362785682082, -0.0022970533464103937, 0.006135462783277035, -0.011984625831246376, 0.006305244751274586, 0.03384990990161896, 0.011671693995594978, 0.04279842972755432, -0.012843524105846882, 0.023649662733078003, 0.00620204396545887, 0.016352355480194092, 0.004713953007012606, 0.002451854757964611, 0.005423043388873339, -0.008429187349975109, 0.029242487624287605, -0.014088593423366547, -0.02985503524541855, 0.02350318245589733, 0.004217922687530518, -0.010919325985014439, -0.00498693622648716, -0.022544413805007935, -0.004723940044641495, -0.013356199488043785, 0.017697297036647797, -0.0029778466559946537, -0.024328790605068207, -0.0077101094648242, 0.010180274024605751, -0.013595892116427422, -0.031932368874549866, 0.007836613804101944, 0.021159522235393524, 0.004810495767742395, -0.01924198307096958, -0.012037890963256359, -0.003412289312109351, -0.010886034928262234, -0.014727774076163769, 0.013103190809488297, 0.04841788858175278, -0.006268625147640705, -0.041706498712301254, 0.01516721025109291, 0.010586420074105263, -0.0018276554765179753, 0.0027547995559871197, 
0.01240408793091774, 0.006398458499461412, -0.0010586419375613332, -0.010965933091938496, -0.046500347554683685, 0.015100629068911076, -0.018136734142899513, 0.011838147416710854, -0.005066833458840847, 0.00925479456782341, 0.010479889810085297, -0.0012833536602556705, 0.0334770567715168, 0.01141868531703949, 0.012237634509801865, 0.019934426993131638, -0.038563862442970276, 0.0011934690410271287, 0.0028413550462573767, -0.004141354002058506, 0.049856044352054596, -0.017351076006889343, -0.0031909067183732986, 0.02107962593436241, -0.012530592270195484, -0.0006212863372638822, -0.035794083029031754, -0.005453004967421293, 0.03813774138689041, 0.012071182020008564, 0.01830984465777874, -0.03185247257351875, 0.003705246839672327, 0.0034788704942911863, -0.007656844332814217, 0.006288599688559771, 0.01922866702079773, 0.02467501349747181, 0.01575312577188015, 0.0015172204002738, 0.011851463466882706, -0.005978996865451336, -0.007543656043708324, 0.01884249597787857, -0.022211506962776184, 0.004284503869712353, 0.023969251662492752, -0.029455548152327538, -0.006508317776024342, -0.011898070573806763, -0.024182312190532684, 0.0007486229878850281, -0.013349541462957859, 0.006241992581635714, 0.009827393107116222, -0.016578732058405876, -0.012284241616725922, -0.0037918025627732277, -0.0027364895213395357, 0.024595115333795547, -0.0072107501327991486, -0.022810738533735275, -0.010952616110444069, -0.013322909362614155, -0.012044548988342285, -0.012843524105846882, -0.009927265346050262, -0.02644607424736023, -0.03773825615644455, 0.0014240066520869732, 0.005512928124517202, -0.014767722226679325, 0.015606646426022053, -0.02186528407037258, 0.002944556064903736, 0.004444298800081015, -0.008901913650333881, 0.004094747360795736, -0.014341602101922035, -0.02093314751982689, -0.011984625831246376, 0.028390247374773026, 0.011585138738155365, 0.0413336418569088, 0.011178992688655853, 0.02737821266055107, 0.019135452806949615, 0.011831489391624928, 0.008675538003444672, -0.004144683014601469, 0.02604658715426922, -0.006681428756564856, -0.010526496917009354, 0.0348086804151535, 0.002796412678435445, 0.02238461747765541, 0.015287056565284729, -0.006688087247312069, 0.010027136653661728, 0.001662866910919547, -0.021279368549585342, -0.016911638900637627, -0.036326732486486435, 0.0008231107494793832, 0.0034722124692052603, -0.024368738755583763, 0.0206668209284544, -0.03329062834382057, -0.024981286376714706, -0.004154670517891645, -0.0393894724547863, 0.0193618293851614, -0.014887568540871143, 0.028257085010409355, -0.004474260378628969, 0.0123042156919837, -0.018216632306575775, 0.03550112619996071, -0.03845733404159546, 0.01581970602273941, -0.0035887297708541155, 0.0052565899677574635, 0.015153893269598484, -0.005443017464131117, 0.010712924413383007, 0.02729831449687481, -0.006315232254564762, 0.006957740988582373, 0.028123922646045685, -0.02506118454039097, -0.005639432463794947, -0.0078099812380969524, 0.011139043606817722, -0.022158240899443626, -0.012104472145438194, -0.029775137081742287, 0.004793850239366293, -0.011605112813413143, 0.03922967612743378, -0.0069377669133245945, 0.018522905185818672, 0.0017361062346026301, -0.024248892441391945, -0.0025134424213320017, -0.004923684056848288, 0.017231229692697525, -0.018456323072314262, 0.012191027402877808, 0.01877591386437416, -0.008315999060869217, -0.01747092232108116, -0.007790006697177887, 0.0021455809473991394, -0.001002047909423709, 0.012930079363286495, 0.028736470267176628, -0.0167385283857584, -0.012583857402205467, -0.009807419031858444, 0.014368235133588314, -0.01661868207156658, -0.008915229700505733, 0.007743400055915117, 0.02390267141163349, 0.004780534189194441, -0.006198714952915907, 0.006028932519257069, -0.009407931007444859, 0.0017361062346026301, -0.02737821266055107, -0.0062819416634738445, -0.02447526901960373, -0.010779505595564842, -0.00015500948939006776, 0.038350801914930344, -0.017031485214829445, 0.025713680312037468, 0.017111383378505707, 0.009700888767838478, -0.015087312087416649, -0.006022274494171143, 0.00031209964072331786, -0.0031859129667282104, -0.0027914191596210003, 0.016578732058405876, 0.003558768192306161, -0.016765160486102104, -0.0060056294314563274, 0.009168239310383797, -0.0008447496802546084, -0.001126055489294231, -0.023649662733078003, 0.02014748752117157, -0.02054697461426258, -0.01103251427412033, -0.020427128300070763, 0.005239944905042648, -0.005536231212317944, 0.031080130487680435, 0.00025696202646940947, -0.0009171568090096116, 0.008282708004117012, 0.00810959655791521, 0.015340321697294712, 0.007610237691551447, 0.0017510870238766074, 0.006951082963496447, -0.015872972086071968, -0.019721368327736855, -0.02631291188299656, 0.012903447262942791, 0.007610237691551447, -0.013456071726977825, -0.012523934245109558, -0.013675790280103683, 0.008948520757257938, 0.01772393099963665, 0.026552604511380196, 0.004437640774995089, 0.013356199488043785, 0.015606646426022053, -0.01982789859175682, -0.0019108820706605911, 0.03728550300002098, 0.0048704189248383045, -0.033690113574266434, 0.013043267652392387, 0.0013083217199891806, -0.021971814334392548, 0.014634559862315655, -0.017337758094072342, -0.021412530913949013, -0.0041846320964396, -0.0021772070322185755, -0.0023486537393182516, -0.005346474703401327, -0.01679179258644581, -0.013402806594967842, -0.0019092174479737878, 0.0005326500395312905, -0.019721368327736855, -0.012630464509129524, 0.010486547835171223, 0.0011709978571161628, 0.008142887614667416, 0.015433534979820251, -0.006345193833112717, -0.0020057603251188993, -0.008216126821935177, -0.00741715170443058, 0.033317260444164276, -0.03416949883103371, 0.001695325248874724, 0.013589234091341496, 0.007896536961197853, -0.0018659397028386593, -0.005206654313951731, -0.029295751824975014, -0.0007881555939093232, -0.012250950559973717, 0.010866060853004456, 0.006581556983292103, 0.0007586102001369, -0.012903447262942791, 0.013056584633886814, -0.005975667852908373, 0.0026282949838787317, -0.0068978178314864635, -0.001979127759113908, -0.020240701735019684, -0.018815862014889717, -0.022730840370059013, 0.0006308574229478836, -0.021638907492160797, 0.03518153354525566, -0.0023020468652248383, -0.02691214345395565, -0.016951587051153183, -0.009880658239126205, -0.017537502571940422, -0.006508317776024342, 0.01499409880489111, -0.003971572034060955, 0.0155933303758502, 0.006411775015294552, 0.015007414855062962, 0.028123922646045685, 0.013342883437871933, 0.02258436195552349, 0.009248136542737484, -0.013402806594967842, -0.010393333621323109, -0.004787192214280367, -0.001364083494991064, 0.006551595404744148, -0.007949802093207836, -0.002047373680397868, 0.016565416008234024, 0.004078101832419634, -0.008588981814682484, 0.03097360022366047, -0.0046007647179067135, -0.03097360022366047, -0.0038217641413211823, -0.019574889913201332, 0.01660536602139473, 0.0010170286986976862, -0.001994108548387885, -0.02048039436340332, -0.008056332357227802, 0.010686291381716728, 0.0219851303845644, 0.015140577219426632, -0.019148768857121468, 0.005333158653229475, -0.01954825595021248, 0.0014897555811330676, -0.022198190912604332, -0.02138589881360531, 0.023982567712664604, -0.01661868207156658, 0.019668102264404297, -0.005945706274360418, -0.01712469942867756, 0.028310349211096764, -0.016685262322425842, 0.00033831599284894764, -0.009734179824590683, 0.0167385283857584, -0.028789734467864037, 0.023583080619573593, 0.022198190912604332, -0.0002781848015729338, -0.03262481465935707, -0.016964903101325035, 0.013795635662972927, -0.008841990493237972, -0.013029951602220535, -0.007184117566794157, 0.010360043495893478, -0.009328033775091171, 0.004880405962467194, -0.00436440110206604, -0.019987693056464195, -0.013149797916412354, -0.0010286803590133786, -0.005190008785575628, -0.004946987144649029, -0.03661968931555748, 0.005389752797782421, -0.00676132645457983, 0.00971420481801033, 0.020626872777938843, -0.02002764120697975, -0.03387654200196266, -0.0004602429398801178, 0.02278410643339157, 0.006784630008041859, 0.0045974357053637505, 0.2277611643075943, 0.01593955233693123, 0.008808700367808342, 0.03382327780127525, -0.010153640992939472, -0.002423557685688138, 0.009880658239126205, 0.012836866080760956, -0.014208439737558365, 0.03158614784479141, -0.03227859362959862, 0.00165704102255404, -0.026619186624884605, -0.007963118143379688, 0.004151341505348682, -0.006295257713645697, -0.018496273085474968, -0.002954543102532625, -0.012024574913084507, -0.0028713166248053312, -0.0014223420294001698, 0.012543908320367336, -0.004683991428464651, -0.023316755890846252, 0.021492429077625275, 0.01811010204255581, 0.007310621906071901, 0.007184117566794157, 0.012943396344780922, 0.002270420780405402, -0.023529816418886185, 0.01772393099963665, 0.006318561267107725, 0.011365420185029507, 0.013049925677478313, -0.0037451956886798143, 0.021252736449241638, 0.005110111553221941, 0.03092033416032791, 0.004457614850252867, 0.011764908209443092, -0.016658630222082138, -0.011305497027933598, -0.027937494218349457, -0.006957740988582373, 0.025620467960834503, -0.02171880565583706, -0.021998446434736252, -0.013902165926992893, 0.01620587706565857, -0.0167385283857584, 0.0003266642743255943, 0.040002018213272095, 0.013136481866240501, -0.0007507036789320409, -0.007956460118293762, 0.008389238268136978, 0.007849929854273796, 0.012357480823993683, 0.0038151058834046125, -0.011991283856332302, 0.026286279782652855, -0.04189292713999748, -0.007889878936111927, -0.008815358392894268, 0.010326752439141273, -0.03930957242846489, -0.01250396016985178, 0.019774632528424263, 
-0.02408909797668457, -0.020826617255806923, -0.01526042353361845, 0.028709838166832924, 0.041253745555877686, -0.03723223879933357, -0.01890907622873783, 0.007077587302774191, 0.024981286376714706, 0.02073340304195881, 0.03267807886004448, -0.008981811814010143, 0.009321375750005245, 0.0008930210606195033, -0.013928798958659172, 0.007277331314980984, -0.03424939885735512, -0.008349289186298847, -0.01243737805634737, -0.016765160486102104, 0.009534435346722603, -0.015207158401608467, -0.018855812028050423, -0.007144168484956026, -0.020586924627423286, 0.004058127291500568, 0.013262986205518246, 0.007024322636425495, 0.04359740763902664, 0.0074304682202637196, -0.012124446220695972, -0.004900380503386259, 0.03795131668448448, 0.006957740988582373, -0.01752418652176857, 0.000580505293328315, 0.0014348260592669249, 0.0034522381611168385, 0.02572699636220932, 0.010020478628575802, -0.0012092820834368467, 0.008162861689925194, -0.02297053299844265, 0.0096809146925807, -0.020054273307323456, 0.0103334104642272, 0.020573608577251434, -0.011072462424635887, -0.04359740763902664, -0.0022854015696793795, 0.004883734975010157, -0.008835332468152046, -0.04777871072292328, -0.03246501833200455, -0.009594358503818512, 0.006268625147640705, -0.0004435976152308285, 0.010559787042438984, -0.016445569694042206, -0.019015606492757797, -0.023010481148958206, 0.005636103451251984, -0.02258436195552349, 0.014727774076163769, 0.010386675596237183, -0.0036153621040284634, -0.00671139033511281, -0.0013141474919393659, -0.011372078210115433, 0.007670160848647356, -0.0038950033485889435, -0.0072107501327991486, -0.01981458067893982, -0.017351076006889343, -0.02206502854824066, -0.003387321252375841, -0.018203314393758774, -0.009055051021277905, -0.009640965610742569, 0.003971572034060955, -0.0367528535425663, -0.011119069531559944, -0.020040957257151604, 0.005000252276659012, -0.0038151058834046125, 0.01089935190975666, -0.00869551207870245, -0.03427603095769882, -0.032917771488428116, 0.012197686359286308, 0.014887568540871143, -0.016059398651123047, 0.008682196028530598, 0.02402251772582531, 0.010619710199534893, -0.02251777984201908, -0.02617974951863289, -0.17098066210746765, 0.004950316157191992, 0.00038658740231767297, -0.03105349838733673, 0.030014829710125923, 0.044263217598199844, 0.007983092218637466, 0.013555943965911865, -0.008435845375061035, -0.004713953007012606, 0.023343387991189957, -0.018802545964717865, -0.017817143350839615, 0.002090651309117675, -0.003139306092634797, 0.014781038276851177, -0.0288696326315403, 
0.012017916887998581, 0.01460792776197195, 0.01010703481733799, 0.01037335954606533, -0.0058258599601686, 0.0039382814429700375, -0.0015355302020907402, 0.0025683718267828226, 0.01118565071374178, -0.026805613189935684, 0.017803827300667763, -0.0022504464723169804, -0.005882454104721546, -0.015673227608203888, 0.010619710199534893, 0.004361072089523077, -0.01705811731517315, 0.011325471103191376, -0.021039675921201706, -0.0026948763988912106, -0.022304721176624298, -0.00246850005351007, 0.0011843140237033367, -0.006128804758191109, 0.027458108961582184, 0.012983344495296478, -0.0007403003401122987, -0.01727117784321308, 0.013029951602220535, 0.032331857830286026, -0.01941509358584881, 0.01621919311583042, -0.01325632818043232, 0.02440868876874447, -0.012084498070180416, 0.010146982967853546, -0.010040453635156155, 0.020493710413575172, 0.012856840156018734, 0.0069444249384105206, 0.023010481148958206, -0.006425091065466404, 0.006757997442036867, -0.007969776168465614, -0.03246501833200455, 0.002318692160770297, -0.007690134923905134, 
0.01890907622873783, -0.025806894525885582, -0.013769003562629223, 0.0021289356518536806, -0.02598000504076481, -0.0007731748046353459, -0.01056644506752491, -0.021212788298726082, 0.02022738568484783, 0.019481675699353218, -0.0014914200874045491, 0.00643174909055233, -0.029189221560955048, 0.00676132645457983, 0.008342631161212921, -0.013535968959331512, -0.005626115947961807, 0.029375649988651276, -0.017564134672284126, 0.04935002699494362, -0.0036719562485814095, 0.003768499009311199, 0.006728035863488913, -0.009887316264212132, 0.008655562996864319, -0.013968747109174728, 0.018496273085474968, -0.004584119655191898, -0.01856285333633423, -0.0019641469698399305, 0.004514208994805813, -0.005439688451588154, 0.022344669327139854, -4.6502846089424565e-05, -0.002137258183211088, -0.011012539267539978, 0.016831740736961365, -0.04325118288397789, -0.027324946597218513, 0.019401777535676956, 0.014767722226679325, 0.022677576169371605, -0.039416104555130005, 0.015300372615456581, 0.010233539156615734, -0.0043843756429851055, -0.041839659214019775, 0.014980782754719257, 0.034755416214466095, 0.01613929681479931, -0.01263712253421545, 0.02388935536146164, -0.005689368117600679, -0.008023041300475597, -0.006911134347319603, 0.004674003925174475, 0.030440950766205788, 0.0013782320311293006, -0.003565426217392087, 0.010206906124949455, 0.010539812967181206, -0.022797422483563423, -0.08474462479352951, -0.010213564150035381, 0.03163941204547882, 0.008142887614667416, -0.03720560669898987, 0.0036686272360384464, -0.007070929277688265, 0.014687824994325638, -0.013243012130260468, 0.005646090488880873, 0.012563883326947689, -0.028576673939824104, -0.00977412797510624, -0.0167252104729414, 0.00232867943122983, -0.02193186618387699, -0.008142887614667416, -0.0016620345413684845, -0.010226881131529808, 0.00892854668200016, -2.202903306169901e-05, -0.011205625720322132, 0.016951587051153183, -0.02362302877008915, 0.0026665793266147375, 0.012017916887998581, -0.041972823441028595, -0.008056332357227802, 0.006045578047633171, 0.0019341855077072978, 0.020467078313231468, -0.03275797888636589, -0.002227142918854952, -0.01615261286497116, -0.0090217599645257, -0.02310369536280632, 0.005662735551595688, 0.009421247988939285, 0.02487475611269474, -0.02086656540632248, -0.0019258628599345684, 0.0022288074251264334, 0.02206502854824066, -0.037445299327373505, 0.001955824438482523, -0.010320094414055347, -0.029482180252671242, 0.026113169267773628, 0.0058258599601686, -0.02355644851922989, -0.035660918802022934, 0.02009422332048416, -0.006398458499461412, -0.023995883762836456, 0.02711188793182373, -0.008382580243051052, 0.0007598585798405111, 0.024142364040017128, -0.01496746577322483, -0.01633903943002224, 0.023263489827513695, -0.01811010204255581, -0.02113289013504982, -0.017564134672284126, 0.006032261531800032, 9.050889639183879e-05, 0.006694745272397995, -0.012071182020008564, 0.026272963732481003, -0.029562076553702354, 0.015500116162002087, 0.03499510884284973, -0.02223813906311989, -0.014035328291356564, -0.043277814984321594, 0.0011759913759306073, -0.027857597917318344, -0.005409726873040199, 0.008921888656914234, -0.005283222533762455, -0.009787444956600666, -0.00931471772491932, -0.0057492912746965885, -0.00456081610172987, -0.023077063262462616, 0.012310873717069626, 0.0037119050975888968, 0.015207158401608467, 0.005066833458840847, -0.017111383378505707, 0.009401272982358932, 0.022824054583907127, -0.006308573763817549, -0.01404864527285099, 0.0008622272289358079, -0.012663754634559155, -0.0136225251480937, 0.02671239897608757, -0.017217911779880524, -0.001695325248874724, 0.010419966652989388, 0.008895255625247955, -0.052013278007507324, 0.019135452806949615, -0.010766188614070415, -0.036060407757759094, 0.01745760440826416, -0.013955431059002876, 0.0076501863077282906, -0.01747092232108116, 0.011951335705816746, -0.005033542867749929, -0.021052993834018707, -0.007863245904445648, 0.0041846320964396, -0.0001756080600898713, 0.007250698748975992, 0.01020024809986353, 0.01956157200038433, -0.00539973983541131, 0.024714961647987366, -0.036726221442222595, -0.002573365578427911, -0.028976162895560265, -0.006964399479329586, 0.01949499174952507, -0.043677303940057755, 0.036007143557071686, -0.010439940728247166, 0.04042813926935196, -0.00784327182918787, -0.03906987980008125, 0.010539812967181206, -0.02514108270406723, 0.02257104590535164, 0.016951587051153183, 0.008808700367808342, -0.02625964768230915, 0.008276049979031086, 0.020493710413575172, 0.03129319101572037, 0.02809729054570198, 0.0046007647179067135, -0.006032261531800032, 0.009700888767838478, -0.024168996140360832, 0.010346727445721626, 0.03398307412862778, 0.0017211254453286529, -0.003971572034060955, 0.019335197284817696, 0.009321375750005245, 0.02087988145649433, 0.010999223217368126, -0.01981458067893982, -0.011938018724322319, -0.006022274494171143, -0.04836462438106537, 0.010499863885343075, -0.02270420826971531, 0.019708052277565002, 0.0036120330914855003, 0.027058621868491173, 0.007523681968450546, 0.004341098014265299, -0.00935466680675745, 0.023609712719917297, -0.010093718767166138, -0.00312432530336082, 0.030680643394589424, 0.026432758197188377, -0.026019955053925514, -0.041919559240341187, 0.015353637747466564, 0.007550314534455538, 0.005646090488880873, 0.020387180149555206, -0.013049925677478313, 0.009274768643081188, 0.01211113017052412, -0.008855306543409824, 0.0154202189296484, 0.00521664135158062, -0.012084498070180416, -0.002954543102532625, 0.01414185855537653, 0.039282940328121185, 0.012557224370539188, 0.008555691689252853, 0.0012459016870707273, -0.01889576017856598, 0.008196152746677399, -0.0186960157006979, -0.0034688834566622972, -0.00662816409021616, -0.002759793074801564, -0.018349794670939445, -0.014954149723052979, 0.0011501911794766784, 0.019055554643273354, -0.002891290932893753, 0.006172082386910915, 0.014980782754719257, 0.0007889879052527249, 0.02009422332048416, -0.02769780158996582, -0.029562076553702354, 0.0292158555239439, -0.013915481977164745, -0.01093264203518629, 0.001997437560930848, 0.025127766653895378, -0.010672975331544876, 0.017430972307920456, 0.0142750209197402, 0.00030148823861964047, -0.004544170573353767, 0.004018178675323725, 0.005453004967421293, -0.03523480147123337, -0.016352355480194092, 0.02415568009018898, 0.018456323072314262, 0.03494184464216232, 0.013982064090669155, -0.007803323213011026, 0.010293462313711643, 0.013236353173851967, 0.007776690647006035, -0.006461710669100285, 0.015473484061658382, 0.0160727147012949, -0.018722649663686752, -0.0071108778938651085, -0.011565163731575012, -0.020853249356150627, -0.008236100897192955, -0.0023935961071401834, 0.01805683597922325, 0.022131608799099922, -0.030574113130569458, 0.058644771575927734, 0.01277028489857912, -0.007011006120592356, 0.0019358500139787793, 0.004407679196447134, 0.0007873233407735825, 0.018136734142899513, -0.012790258973836899, -0.011432001367211342, -0.01765734888613224, 0.005696026608347893, 0.0034522381611168385, 0.012097814120352268, -0.02841687947511673, 0.011898070573806763, 0.01812341809272766, -0.002580023603513837, 0.022597678005695343, -0.015460167080163956, 0.007656844332814217, -0.006345193833112717, 0.01679179258644581, -0.005236615892499685, -0.005026884842664003, -0.024901390075683594, 0.012457353062927723, 0.0073772030882537365, -0.03792468458414078, -0.008302683010697365, -0.03326399624347687, 0.005066833458840847, -0.008289366029202938, -0.015047363936901093, -0.011212283745408058, 0.004990265239030123, 0.006488343235105276, -0.0060655525885522366, 0.005805885419249535, 0.02302379719913006, 0.0055761802941560745, 0.023636344820261, 0.02277078852057457, -0.019854530692100525, -0.005666065029799938, -0.01375568751245737, -0.001402367721311748, -0.011598454788327217, -0.0033507016487419605, -0.02231803722679615]
    
    system_message = """Classify the intent of the customer request by choosing one of these categories:
<0> Not a request (cannot classify)
<1> Inquiring programming source code.
<2> Scheduling a meeting with the team.
<3> A clear request but it is not belong to any of the above.

Reason your choice and conclude with a number indicating your choice like this [Intent]: <number>

## Example ##
Customer request:
```
Write me a Python code to print out a Hello world!
```

Let's think step by step. The customer is requesting to write a Python program to print to the screen a text "Hello world!". So, it's Inquiring programming source code. [Intent]: 1"""

    user_content_template = """
Customer request:
```
{request}
```

Let's think step by step.
"""


class RequestExtractionRefinePrompt:
    SUFFICIENT_TOKEN = "[Sufficient context]"

    system_message_check = """Given a request, reason which part is ambiguous and finally respond [Insufficient context]. If the request provide sufficient context, reason why and finally respond [Sufficient context].

Given request: "I want to solve the math problem of 1 + 1."
Reasoning: The request clearly states the problem is the addition of 1 and 1. So, [Sufficient context].

Given request: "Can you resolve the problem I gave you yesterday?"
Reasoning: Although the request mentioned time when the problem was told but it does not clearly state the problem in this sentence. So, [Insufficient context]
"""

    user_content_template_check = """Given request: '{request}'
Reasoning:"""

    system_message_refine = """Given a request/question that is missing information, you are required to find and extract the context mentioned in the request based on the given conversation history and current message.
Follow the following step to refine the request:
1. Extract the context the original request is mentioning. 
2. Combine the context extracted with the original request.
3. Respond in JSON format as below:
{
  "reasoning": "STEP BY STEP REASONING WHICH IS THE CONTEXT THE ORIGINAL REQUEST MENTIONS",
  "context": "THE CONTEXT WHICH MUST HAVE BEEN MENTIONED THE ORIGINAL REQUEST",
  "refined_request": "A COMBINATION OF THE ORIGINAL REQUEST AND EXTRACTED CONTEXT"
}

The original request: "Is simply restarting it the solution for the issue?"
Current message: "I restart it to resolve the problem. Is it the only way? Additionally, I want to know which command is used to turn off the speak function of the robot."
Conversation history:
[{"user": "Hello. I got an issue with my robot."},
{"assistant": "Hi. What is your issue?"},
{"user": "It cannot speak correctly when triggered."},
{"assistant": "What have you tried?"}]
JSON-formatted respond:
{
  "reasoning": "Let's think step by step. Get started from the original request. The original request is wondering whether restarting something is the solution for an issue. But it does not clearly describe the thing restarted and the issue. Therefore, the missing context is the thing to be restarted and the issue. Based on the conversation history, the user is asking for the solution for the problem of the robot being unable to speak correctly when triggered and tried to restarting it. So, the context is the problem of the robot being unable to speak correctly when triggered.",
  "context": "The problem is that the robot cannot speak correctly when triggered",
  "refined_request": "The robot cannot speak correctly when triggered. Is simply restarting it the solution for this issue?"
}

The original request: "How can I address the problem?"
Current message: "Hi. My application could not open this morning. Which causes are causing this problem? Additionally, how can I address the problem?"
Conversation history: []
JSON-formatted respond:
{
  "reasoning": "Let's think step by step. Get started from the original request. The original request is to seek solutions for a problem. However, it does not provide the problem explicitly. After reading the current message, I found that the preceding sentence of the question in the current message clearly describes a problem. Therefore, it is the context that the request is missing and the problem is the application being unable to open.",
  "context": "The problem need to address is the application being unable to open",
  "refined_request": "How can I address the problem of my application being unable to open?"
}
"""

    user_content_template_refine = """The original request: "{original_request}"
Current message: "{current_message}"
Conversation history: 
{conversation_history}
JSON-formatted respond:
"""